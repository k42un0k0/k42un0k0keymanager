<form [formGroup]="form" (ngSubmit)="save()">
  <header class="header">
    <div class="primary title">
      外部アカウントの作成
    </div>
    <button class="button" mat-dialog-close mat-icon-button color="primary"
      aria-label="Example icon button with a menu icon">
      <mat-icon> close </mat-icon>
    </button>
  </header>
  <div formGroupName="outerAccount">
    <app-input label="Provider Name" name="providerName" [disabled]="disabled" formControlName="providerName">
    </app-input>
    <app-input label="User ID" name="userId" [disabled]="disabled" formControlName="userId"></app-input>
  </div>
  <mat-slide-toggle *ngIf="!disabled" class="gray-text" formControlName="isGeneratePassword">
    パスワードを自動で生成する
  </mat-slide-toggle>
  <div class="gray-text" *ngIf="!disabled&&isGeneratePassword?.value">
    <div formGroupName="check">
      <mat-checkbox formControlName="lowercase">
        英小文字含む
      </mat-checkbox>
      <mat-checkbox formControlName="uppercase">
        英大文字含む
      </mat-checkbox>
      <mat-checkbox formControlName="numeric">
        数字含む
      </mat-checkbox>
      <mat-checkbox formControlName="symbol">
        記号含む
      </mat-checkbox>
    </div>
    <div>
      <input type="text" inputmode="decimel" pattern="\d{1,5}" title="Only digits" formControlName="passwordLength" />
      <button mat-button color="primary" type="button" (click)="genPassworda()">生成する</button>
    </div>
  </div>
  <div formGroupName="outerAccount">
    <app-input type="password" label="Password" name="password" [disabled]="disabled" formControlName="password">
    </app-input>
    <div class="link-group">
      <app-input label="Link" name="link" [disabled]="disabled" formControlName="link"
        (ngModelChange)="onChangeLink($event)">
      </app-input>
      <img [src]="outerAccount?.value.iconPath" alt="provider icon" />
    </div>
  </div>
  <div *ngIf="disabled; else submitBlock" class="form-action">
    <button data-testid="editButton" (click)="toggleEdit()" mat-button color="primary">編集</button>
  </div>
  <ng-template #submitBlock>
    <div class="form-action">
      <button mat-button color="primary" type="submit">保存</button>
      <button *ngIf="editing" (click)="toggleEdit()" mat-button color="primary">キャンセル</button>
    </div>
  </ng-template>
  <div *ngIf="disabled" class="form-action">
    <button (click)="destroyAccount()" mat-button color="primary">削除</button>
  </div>
</form>
